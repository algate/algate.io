


<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
    <title>Algate's Blog|对Storage和cookie的封装</title>
    
    
    <meta name="author" content="algate">
    <!-- Custom styles -->
    <link href="/assets/src/css/bootstrap.css" rel="stylesheet" type="text/css">
    <link href="/assets/css/style.css" rel="stylesheet" type="text/css">
    <!-- single page styles -->
    
        
            <link href="/assets/css/study_relevant.css" rel="stylesheet" type="text/css">
        
    
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <link href="/assets/icon/favicon.ico" rel="bookmark" type="image/x-icon" />
    <link href="/assets/icon/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link href="/assets/icon/favicon.svg" rel="shortcut icon" type="image/x-icon" />
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
    
    <script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?617bf75bfd954382202927d87bf48f13";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
    </script>
    

  </head>
  <body>
    <div id="wrap">
        <nav class="navbar navbar-default navbar-dark-orange" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#jb-navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">Algate's Blog</a>
            </div>
            <div class="collapse navbar-collapse" id="jb-navbar-collapse">
                <ul class="nav navbar-nav">
                    
                    
                                                                       
<li class="menu-item"><a href="/main/">网站首页</a> 
</li>
        
<li class="menu-item"><a href="/topics/life/">生活点滴</a> 
    <ul class="dropdown-menu bounceOutDown animated">
        
        <li><a title="" target="_self" href="/topics/readlist">阅读列表</a></li>
        
        <li><a title="" target="_self" href="/topics/psd">手绘作品</a></li>
        
        <li><a title="" target="_self" href="/topics/mywork">我的作品</a></li>
        
    </ul>
    
</li>
        
<li class="menu-item"><a href="/topics/study/">学习点滴</a> 
    <ul class="dropdown-menu bounceOutDown animated">
        
        <li><a title="" target="_self" href="/topics/webacc">前端积累</a></li>
        
        <li><a title="" target="_self" href="/topics/webcolle">资料收集</a></li>
        
        <li><a title="" target="_self" href="/topics/javascript">Javascript</a></li>
        
        <li><a title="" target="_self" href="/topics/jekyll">Jekyll</a></li>
        
        <li><a title="" target="_self" href="/topics/es6">ECMAScript</a></li>
        
        <li><a title="" target="_self" href="/topics/services">services</a></li>
        
    </ul>
    
</li>
        
<li class="menu-item"><a href="/archive/">文章存档</a> 
</li>
        
<li class="menu-item"><a href="/about/">关于algate</a> 
</li>
        
<li class="menu-item"><a href="/sorts/">文档归类</a> 
</li>
       
                </ul>
            </div>
        </nav>
        <div class="container">
            


<div class="page-header">
    <h1>
     <small>对Storage和cookie的封装</small>
    
    </h1>
    <hgroup>
        <div class="post-meta">
            <img src="/assets/images/calendar.png" width="20px" />
            <time datetime="2016-11-05 01:21:00 +0800" itemprop="datePublished" class="post-meta__date date">2016-11-05</time>
            <span id="busuanzi_container_page_pv">
              本文总阅读量<span id="busuanzi_value_page_pv"></span>次
            </span>
            </p>
        </div>
    </hgroup>
</div>
<div class="content-center">
    <div class="row">
        <div class="col-md-12 post-container post-container-category">
            <pre>
<textarea class="cm_textarea">
&lt;!doctype html&gt;
<html>
<head>
	<meta charset="utf-8" />
	<title>test</title>
</head>
<body>
	<script type="text/javascript">
	var singleton = function( fn ){
	    var result;
	    return function(){
	        return result || ( result = fn .apply( this, arguments ) );
	    }
	}
	var _storage=singleton(function(){
		var lstorage;
		if(window.localStorage){
			lstorage=localStorage;
		}else{
		    var UserData = {
		    userData: null,
		    name: location.hostname,

		    init: function() {
		        if(!UserData.userData) {
		            try {
		                UserData.userData = document.createElement('div');
		                UserData.userData.type = "hidden";
		                UserData.userData.style.display = "none";
		                UserData.userData.addBehavior("#default#userData");
		                document.body.appendChild(UserData.userData);
		                var expires = new Date();
		                expires.setDate(expires.getDate() + 365);
		                UserData.userData.expires = expires.toUTCString();
		            } catch(e) {
		                return false;
		            }
		        }
		        return true;
		    },

		    setItem: function(key, value) {
		        if(UserData.init()) {
		            UserData.userData.setAttribute(key,value);
		        }
		    },

		    getItem: function(key) {
		        if(UserData.init()) {
		            var  v=UserData.userData.getAttribute(key);
		            return v;
		        }
		    },
		    removeItem: function(key) {
		        if(UserData.init()) {
		            UserData.userData.removeAttribute(key);
		        }
		    },
		    //以下三个方法暂时留着,区别Attribute和property
		    getAttr:function(el, prop){
		    	return el[prop] || el.getAttribute(prop);
		    },
		    setAttr:function(el, prop, val){
	    		el[prop] = val;
		    },
		    removeAttr:function(el, prop){
		    	delete el[prop];
		    }
		};
			lstorage=UserData;
		};
		var ls = {
			setLocalStorage : function(k,v){
				lstorage.setItem(k,v);
			},
			getLocalStorage : function(k){
				return lstorage.getItem(k);
			},
			removeLocalStorage:function(k){
				lstorage.removeItem(k);
			},
			clearLocalStorage : function(){
				lstorage.clear();
			}
		};
		return ls;
	})();

	var _cookie=singleton(function(){
		var ck={
			addCookie:function(obj){
				if(typeof(obj)==="undefined"){
					return;
				}
				for(var c in obj){
					var strCookie=c+"="+obj[c]+";"
					// cookieString+=strCookie;
					document.cookie=strCookie;
				}
				// alert(document.cookie)
			},
			getCookie : function(name){
				var strCookie=document.cookie;
				var arrCookie=strCookie.split("; ");
				for(var i=0;i<arrCookie.length;i++){
					var arr=arrCookie[i].split("=");
					if(arr[0]==name){
						return arr[1];
					};
				}
				return "";

			},
			deleteCookie : function(name){
				var date=new Date();
				date.setTime(date.getTime()-10000);
				document.cookie=name+"=v; expires="+date.toGMTString();
			}
		};
		return ck;
	})();
	//需要存储的数据
	var storageJson={
		"name":"bamzc",
		"age":"23",
		"sex":"男"
	};
	_storage.setLocalStorage("name",storageJson.name);
	// _storage.removeLocalStorage("name");
	document.write("我给localStorage赋值："+_storage.getLocalStorage("name"));
    _cookie.addCookie(storageJson);
    // _cookie.deleteCookie("age");
    document.write("<br><br>我添加了一个cookie："+_cookie.getCookie("age"));
	</script>
</body>
</html>
</textarea>
</pre>

        </div>
    </div>
</div>
<div style="width:1200px; margin:0 auto;">
    <section>
    <div class="content-play">
        <p><a href="javascript:void(0)" onclick="dashangToggle()" class="dashang" title="打赏，支持一下">打赏一个呗</a></p>
        <div class="hide_box-play"></div>
        <div class="shang_box-play">
            <a class="shang_close-play" href="javascript:void(0)" onclick="dashangToggle()" title="关闭"><img src="/assets/images/payimg/close.jpg" alt="取消" /></a>
            <div class="shang_tit-play">
                <p>感谢您的支持，我会继续努力的!</p>
            </div>
            <div class="shang_payimg">
                <img src="/assets/images/payimg/alipayimg.jpg" alt="扫码支持" title="扫一扫" />
            </div>
            <div class="shang_payimg">
                <img src="/assets/images/payimg/weipayimg.jpg" alt="扫码支持" title="扫一扫" />
            </div>
            <div class="pay_explain">扫码打赏，你说多少就多少</div>
            <div class="shang_payselect">
                <div class="pay_item checked" data-id="alipay">
                    <span class="pay_logo"><img src="/assets/images/payimg/alipay.jpg" alt="支付宝" /></span>
                </div>
                <div class="pay_item" data-id="weipay">
                    <span class="pay_logo"><img src="/assets/images/payimg/wechat.jpg" alt="微信" /></span>
                </div>
            </div>
            <div class="shang_info-play">
                <p>打开<span id="shang_pay_txt">支付宝</span>扫一扫，即可进行扫码打赏哦</p>
            </div>
        </div>
    </div>
    <script type="text/javascript">
    function dashangToggle() {
        $(".hide_box-play").fadeToggle();
        $(".shang_box-play").fadeToggle();
    }
    </script>
    <div style="text-align:center;margin:50px 0; font:normal 14px/24px 'MicroSoft YaHei';"></div>
    <style type="text/css">
    .content-play {
        margin-top: 16px;
        margin-bottom: 10px;
        height: 40px;
    }

    .hide_box-play {
        z-index: 999;
        filter: alpha(opacity=50);
        background: #666;
        opacity: 0.5;
        -moz-opacity: 0.5;
        left: 0;
        top: 0;
        height: 99%;
        width: 100%;
        position: fixed;
        display: none;
    }

    .shang_box-play {
        width: 540px;
        height: 460px;
        padding: 10px;
        background-color: #fff;
        border-radius: 10px;
        position: fixed;
        z-index: 1000;
        left: 50%;
        top: 50%;
        margin-left: -280px;
        margin-top: -280px;
        border: 1px dotted #dedede;
        display: none;
        text-align: center;
    }

    .shang_box-play img {
        border: none;
        border-width: 0;
    }

    .dashang {
        display: block;
        width: 100px;
        margin: 5px auto;
        line-height: 25px;
        padding: 10px;
        background-color: #E74851;
        color: #fff;
        text-align: center;
        text-decoration: none;
        border-radius: 10px;
        font-weight: bold;
        font-size: 16px;
        transition: all 0.3s;
    }

    .dashang:hover {
        opacity: 0.8;
    }

    .shang_close-play {
        float: right;
        display: inline-block;
        margin-right: 10px;
        margin-top: 20px;
    }

    .shang_logo {
        display: block;
        text-align: center;
        margin: 20px auto;
    }

    .shang_tit-play {
        width: 100%;
        height: 75px;
        text-align: center;
        line-height: 66px;
        color: #a3a3a3;
        font-size: 16px;
        background: url('/images/payimg/cy-reward-title-bg.jpg');
        font-family: 'Microsoft YaHei';
        margin-top: 7px;
        margin-right: 2px;
    }

    .shang_tit-play p {
        color: #a3a3a3;
        text-align: center;
        font-size: 16px;
    }

    .shang_payimg {
        padding: 10px;
        /*border:6px solid #EA5F00;**/
        margin: 0 auto;
        border-radius: 3px;
        height: 140px;
        display: inline-block;
    }

    .shang_payimg img {
        display: inline-block;
        margin-right: 10px;
        text-align: center;
        width: 140px;
        height: 140px;
    }

    .pay_explain {
        text-align: center;
        margin: 10px auto;
        font-size: 12px;
        color: #545454;
    }

    .shang_payselect {
        text-align: center;
        margin: 0 auto;
        margin-top: 40px;
        cursor: pointer;
        height: 60px;
    }

    .shang_payselect .pay_item {
        display: inline-block;
    }

    .shang_info-play {
        clear: both;
    }

    .shang_info-play p,
    .shang_info-play a {
        color: #C3C3C3;
        text-align: center;
        font-size: 12px;
        text-decoration: none;
        line-height: 2em;
    }
    </style>
    <ul class="pager">
        
        <li class="previous">
            <a href="/2016/10/15/markdown.html" data-toggle="tooltip" data-placement="top" title="markdown语法">下一篇：  <span>markdown语法</span>
            </a>
        </li>
         
        <li class="next">
            <a href="/2016/11/07/resource-collection.html" data-toggle="tooltip" data-placement="top" title="javascript">上一篇：  <span>javascript</span>
            </a>
        </li>
        
    </ul>
</section>
    <div><a href="https://github.com/login/oauth/authorize?scope=public_repo&redirect_uri=http%3A%2F%2Flocalhost%3A4010%2F2017%2F06%2F09%2Fvue-router%2Bwebpack-pit&client_id=0b0d43a49adc0200ac23&client_secret=82553f5ed0d11dc2792158cf476aa731664467ca">登录之后才能评论，请大家先用github账户登录</a></div>
    <div id="gitmentContainer"></div>
    <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
    <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
    <script>
    var gitment = new Gitment({
        owner: 'algate',
        repo: 'algate.github.io',
        oauth: {
            client_id: '0b0d43a49adc0200ac23',
            client_secret: '82553f5ed0d11dc2792158cf476aa731664467ca'
        },
    });
    gitment.render('gitmentContainer');
    </script>
</div>


        </div>
        <hr/>
        <section class="footer">
    <footer style="position: relative;z-index: 4;color:#444;">
        <div class="footer_div">
            <div style="text-align: center;">
                <!-- 访问统计 -->
                <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
            </div>
            <p class="copyright text-muted">
                Copyright &copy; Algate's Blog 2015-2018 Theme by <a href="https://algate.github.io/">Algate</a> |
                <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=algate&repo=algate.github.io&type=star&count=true">
                </iframe>
            </p>
            <div>
    </footer>
</section>
    </div>
    <!-- <div class="focus-slider flexslider">
        <canvas id="canvas" style="position: fixed;z-index: 0;top:0;"></canvas>
    </div> -->
    <!-- <script type="text/javascript" src="/assets/js/main.js"></script> -->
    <script type="text/javascript" src="/assets/js/jquery-1.11.3.min.js"></script>
    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <script src="/assets/js/common.js"></script>
    
        
            <script src="/assets/js/study_relevant.js"></script>
        
    
  </body>
</html>

